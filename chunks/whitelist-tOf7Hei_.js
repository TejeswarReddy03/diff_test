import{_ as $}from"./SfFavicon.vue_vue_type_script_setup_true_lang-BqcD5SEv.js";import{_ as N}from"./Alert.vue_vue_type_script_setup_true_lang-DgaHjpj3.js";import{aV as A,w as T,ae as V,am as L,aj as g,ap as c,aG as o,aO as M,ax as a,as as O,aw as w,af as t,G as s,av as C,az as d,aA as n,aI as m,ay as P,aC as F,aJ as k}from"./_virtual_wxt-plugins-CgS_BGdF.js";import{u as R}from"./useAddAllowedPatternMutation-8sBoonnL.js";import{u as G}from"./useMutation-BhQfRMH1.js";import{p as H}from"./immer-CwDZyRGJ.js";import{u as z}from"./useGetNuclearTimerQuery-CbANNXdz.js";import{b as Y}from"./tailwind-C6GlUj0q.js";import{C as y}from"./close-BfE11LHo.js";import{B as j}from"./bin-D3kJEuLM.js";import{b as x}from"./useConfirmationStore-CrGQIQTN.js";import{_ as J}from"./HeaderItem-B9YPjTpp.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PlatformIcon.vue_vue_type_script_setup_true_lang-BltirQPY.js";function U(){const{state:i}=A(T);return G({mutationFn:async({pattern:l})=>{let r=!1;const p=H(i.value,_=>{const f=_.findIndex(v=>v==l);f!=-1&&(_.splice(f,1),r=!0)});r&&(i.value=p)}})}const q=["disabled","placeholder"],K=["value","disabled"],X={key:1,class:"mt-3"},Z={class:"w-full border border-neutral-400 list-none px-0 mt-4 min-h-9 rounded",id:"allowedSitesList"},tt={key:0,class:"m-auto p-2"},et=["onClick"],st={class:"inline-block ml-1 align-text-bottom"},it={class:"mt-3"},nt=V({__name:"WhitelistInput",setup(i){const l=L(),{state:r}=A(T),{mutate:p}=R(),{mutate:_}=U(),{data:f}=z(),v=x(),h=g(()=>!!f.value),S=g(()=>r.value.length==0);async function E(){if(l.value){const e=l.value.split(`
`);e.forEach(b=>p({pattern:b})),l.value=void 0,k.track("ADD_WEBSITES_TO_WHITELIST",{count_of_websites:e.length.toString()})}}async function W(e){_({pattern:e}),k.track("DELETE_WEBSITE_FROM_WHITELIST")}function D(){v.show({title:s("clearWhitelist"),message:s("areYouSureClearWhitelist"),positiveButtonText:s("clearAll"),destructive:!0,onClickPositive(){return r.value=[],!0},negativeButtonText:s("cancel")})}return(e,b)=>{const B=N,I=$;return o(),c("div",null,[M(a("textarea",{"data-testid":"allowed-sites-textarea",class:"textarea textarea-bordered w-full",disabled:t(h),placeholder:("t"in e?e.t:t(s))("enterSitesHere"),"onUpdate:modelValue":b[0]||(b[0]=u=>l.value=u)},null,8,q),[[Y,l.value]]),a("input",{type:"button",value:("t"in e?e.t:t(s))("addAllowedSites"),class:"btn btn-sm btn-primary mt-2 uppercase",disabled:t(h),"data-testid":"add-allowed-sites-btn",onClick:E},null,8,K),t(h)?(o(),O(B,{key:0,type:"error"},{default:C(()=>[d(n(("t"in e?e.t:t(s))("cannotAddAllowedSitesDuringNuclearOption")),1)]),_:1})):(o(),c("p",X,[d(n(("t"in e?e.t:t(s))("removeSitesDescription1"))+" ",1),m(t(y),{class:"h-5 w-5 text-error align-middle inline-block"}),d(" "+n(("t"in e?e.t:t(s))("removeSitesDescription2")),1)])),a("ul",Z,[t(S)?(o(),c("p",tt,n(("t"in e?e.t:t(s))("noSitesYet")),1)):w("",!0),(o(!0),c(P,null,F(t(r),u=>(o(),c("li",{class:"mt-1 mb-1 ml-2 flex items-center",key:u},[t(h)?w("",!0):(o(),c("button",{key:0,class:"btn btn-sm btn-ghost btn-circle",onClick:dt=>W(u)},[m(t(y),{class:"h-5 w-5 cursor-pointer align-middle text-error inline-block","data-url":"website"})],8,et)),m(I,{"app-id":u,size:24,class:"icon align-sub"},null,8,["app-id"]),a("p",st,n(u),1)]))),128))]),t(S)?w("",!0):(o(),c("button",{key:2,onClick:D,class:"btn btn-outline btn-error btn-sm mt-4 not-prose uppercase"},[m(t(j),{class:"h-5 w-5 align-text-bottom"}),d(" "+n(("t"in e?e.t:t(s))("clearAll")),1)])),a("p",it,[a("small",null,n(("t"in e?e.t:t(s))("removeSitesAtAnyTime")),1)])])}}}),at={},ot={class:"flex flex-col"},lt={class:"mt-0"},rt={class:"list-disc text-sm mt-4 ml-3 text-info"},ct={class:"mt-2"};function ut(i,l){const r=J,p=nt;return o(),c("div",ot,[m(r,null,{default:C(()=>[d(n(("t"in i?i.t:t(s))("whitelist")),1)]),_:1}),a("div",lt,[d(n(("t"in i?i.t:t(s))("whitelistAddingSiteDescription"))+" ",1),a("ul",rt,[a("li",null,n(("t"in i?i.t:t(s))("whitelistAddingSiteRule1")),1),a("li",ct,n(("t"in i?i.t:t(s))("whitelistAddingSiteRule2")),1)])]),m(p,{class:"mt-4"})])}const Ct=Q(at,[["render",ut]]);export{Ct as default};
